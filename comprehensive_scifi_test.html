<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>科幻界面综合测试</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #0a0a2a;
            color: #ffffff;
            font-family: Arial, sans-serif;
        }
        
        .test-container {
            text-align: center;
            margin-bottom: 20px;
        }
        
        canvas {
            border: 1px solid #00ffff;
            background: #0a0a2a;
        }
        
        .info {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid #00ffff;
            border-radius: 5px;
        }
        
        .controls {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        
        .control-btn {
            padding: 10px 20px;
            background: linear-gradient(45deg, #00ffff, #0080ff);
            border: 2px solid #00ffff;
            color: white;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .control-btn:hover {
            background: linear-gradient(45deg, #0080ff, #0040ff);
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h2>🎮 科幻界面综合测试</h2>
        <canvas id="testCanvas" width="800" height="600"></canvas>
        
        <div class="controls">
            <button class="control-btn" onclick="toggleCommander()">切换指挥官</button>
            <button class="control-btn" onclick="toggleThreats()">切换威胁</button>
            <button class="control-btn" onclick="toggleSidebar()">切换侧边栏</button>
            <button class="control-btn" onclick="toggleKnowledge()">知识库</button>
        </div>
        
        <div class="info">
            <h3>✨ 科幻界面特性</h3>
            <ul>
                <li>🔵 指挥官：科幻亮色圆圈，动态光点效果</li>
                <li>💫 威胁：浅亮色科幻风格，互相区分</li>
                <li>⚪ 侧边栏：科幻亮色面板，发光边框</li>
                <li>🌊 知识库：随时可点击，动态更新</li>
                <li>🎯 威胁间隔：缩短至30帧，速度加快</li>
            </ul>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('testCanvas');
        const ctx = canvas.getContext('2d');
        
        // 测试状态
        let showCommander = true;
        let showThreats = true;
        let showSidebar = true;
        let showKnowledge = false;
        
        // 指挥官位置
        let commanderX = 400;
        let commanderY = 500;
        
        // 威胁位置
        const threats = [
            { x: 200, y: 100, type: 'phishing', color: '#ff6b9d' },
            { x: 400, y: 150, type: 'malware', color: '#ffb366' },
            { x: 600, y: 200, type: 'ddos', color: '#66ccff' },
            { x: 300, y: 250, type: 'data_leak', color: '#cc99ff' }
        ];
        
        // 科幻圆圈绘制函数
        function drawSciFiCircle(ctx, x, y, size, color = '#00ffff') {
            // 创建径向渐变
            const gradient = ctx.createRadialGradient(x, y, 0, x, y, size);
            gradient.addColorStop(0, color);
            gradient.addColorStop(0.3, darkenColor(color, 0.2));
            gradient.addColorStop(0.7, darkenColor(color, 0.4));
            gradient.addColorStop(1, darkenColor(color, 0.6));
            
            // 绘制主体圆圈
            ctx.fillStyle = gradient;
            ctx.shadowColor = color;
            ctx.shadowBlur = 15;
            ctx.beginPath();
            ctx.arc(x, y, size, 0, Math.PI * 2);
            ctx.fill();
            
            // 绘制发光边框
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.shadowBlur = 8;
            ctx.beginPath();
            ctx.arc(x, y, size, 0, Math.PI * 2);
            ctx.stroke();
            
            // 绘制内部装饰环
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 1;
            ctx.shadowBlur = 5;
            ctx.beginPath();
            ctx.arc(x, y, size * 0.6, 0, Math.PI * 2);
            ctx.stroke();
            
            // 绘制中心点
            ctx.fillStyle = '#ffffff';
            ctx.shadowBlur = 3;
            ctx.beginPath();
            ctx.arc(x, y, 2, 0, Math.PI * 2);
            ctx.fill();
            
            // 绘制动态光点效果
            const time = Date.now() * 0.005;
            const pulseSize = size * 0.3 + Math.sin(time) * 2;
            ctx.strokeStyle = color;
            ctx.lineWidth = 1;
            ctx.globalAlpha = 0.6 + Math.sin(time) * 0.2;
            ctx.beginPath();
            ctx.arc(x, y, pulseSize, 0, Math.PI * 2);
            ctx.stroke();
            
            ctx.globalAlpha = 1;
        }
        
        // 绘制威胁
        function drawThreat(ctx, x, y, type, color) {
            const size = 15;
            
            switch (type) {
                case 'phishing':
                    drawTriangle(ctx, x, y, size, color);
                    break;
                case 'malware':
                    drawSquare(ctx, x, y, size, color);
                    break;
                case 'ddos':
                    drawSciFiCircle(ctx, x, y, size, color);
                    break;
                case 'data_leak':
                    drawDiamond(ctx, x, y, size, color);
                    break;
            }
        }
        
        // 绘制三角形
        function drawTriangle(ctx, x, y, size, color) {
            const gradient = ctx.createRadialGradient(x, y, 0, x, y, size);
            gradient.addColorStop(0, color);
            gradient.addColorStop(1, darkenColor(color, 0.4));
            
            ctx.fillStyle = gradient;
            ctx.shadowColor = color;
            ctx.shadowBlur = 10;
            ctx.beginPath();
            ctx.moveTo(x, y - size);
            ctx.lineTo(x - size, y + size);
            ctx.lineTo(x + size, y + size);
            ctx.closePath();
            ctx.fill();
            
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.shadowBlur = 5;
            ctx.stroke();
        }
        
        // 绘制正方形
        function drawSquare(ctx, x, y, size, color) {
            const gradient = ctx.createRadialGradient(x, y, 0, x, y, size);
            gradient.addColorStop(0, color);
            gradient.addColorStop(1, darkenColor(color, 0.4));
            
            ctx.fillStyle = gradient;
            ctx.shadowColor = color;
            ctx.shadowBlur = 10;
            ctx.fillRect(x - size, y - size, size * 2, size * 2);
            
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.shadowBlur = 5;
            ctx.strokeRect(x - size, y - size, size * 2, size * 2);
        }
        
        // 绘制菱形
        function drawDiamond(ctx, x, y, size, color) {
            const gradient = ctx.createRadialGradient(x, y, 0, x, y, size);
            gradient.addColorStop(0, color);
            gradient.addColorStop(1, darkenColor(color, 0.4));
            
            ctx.fillStyle = gradient;
            ctx.shadowColor = color;
            ctx.shadowBlur = 10;
            ctx.beginPath();
            ctx.moveTo(x, y - size);
            ctx.lineTo(x + size, y);
            ctx.lineTo(x, y + size);
            ctx.lineTo(x - size, y);
            ctx.closePath();
            ctx.fill();
            
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.shadowBlur = 5;
            ctx.stroke();
        }
        
        // 绘制科幻侧边栏
        function drawSciFiSidebar(ctx) {
            const sidebarWidth = 200;
            const sidebarX = canvas.width - sidebarWidth;
            
            // 绘制背景
            const gradient = ctx.createLinearGradient(sidebarX, 0, sidebarX + sidebarWidth, 0);
            gradient.addColorStop(0, 'rgba(0, 255, 255, 0.15)');
            gradient.addColorStop(0.5, 'rgba(0, 128, 255, 0.2)');
            gradient.addColorStop(1, 'rgba(0, 64, 255, 0.25)');
            ctx.fillStyle = gradient;
            ctx.fillRect(sidebarX, 80, sidebarWidth, canvas.height - 160);
            
            // 绘制发光边框
            ctx.strokeStyle = '#00ffff';
            ctx.lineWidth = 3;
            ctx.shadowColor = '#00ffff';
            ctx.shadowBlur = 8;
            ctx.strokeRect(sidebarX, 80, sidebarWidth, canvas.height - 160);
            
            // 绘制装饰性网格
            ctx.strokeStyle = '#00ffff';
            ctx.lineWidth = 1;
            ctx.globalAlpha = 0.3;
            for (let y = 90; y < canvas.height - 170; y += 20) {
                ctx.beginPath();
                ctx.moveTo(sidebarX + 10, y);
                ctx.lineTo(sidebarX + sidebarWidth - 10, y);
                ctx.stroke();
            }
            ctx.globalAlpha = 1;
            
            // 绘制标题
            ctx.fillStyle = '#ffffff';
            ctx.font = 'bold 18px Arial';
            ctx.textAlign = 'center';
            ctx.shadowColor = '#00ffff';
            ctx.shadowBlur = 5;
            ctx.fillText('科幻侧边栏', sidebarX + sidebarWidth/2, 105);
            ctx.shadowBlur = 0;
        }
        
        // 绘制知识库按钮
        function drawKnowledgeButton(ctx) {
            const buttonWidth = 120;
            const buttonHeight = 40;
            const x = canvas.width - buttonWidth - 20;
            const y = 90;
            
            // 绘制按钮背景
            const buttonGradient = ctx.createLinearGradient(x, y, x, y + buttonHeight);
            buttonGradient.addColorStop(0, 'rgba(0, 255, 255, 0.8)');
            buttonGradient.addColorStop(0.5, 'rgba(0, 128, 255, 0.9)');
            buttonGradient.addColorStop(1, 'rgba(0, 64, 255, 0.8)');
            
            ctx.fillStyle = buttonGradient;
            ctx.shadowColor = '#00ffff';
            ctx.shadowBlur = 15;
            ctx.fillRect(x, y, buttonWidth, buttonHeight);
            ctx.shadowBlur = 0;
            
            // 绘制发光边框
            ctx.strokeStyle = '#00ffff';
            ctx.lineWidth = 3;
            ctx.shadowColor = '#00ffff';
            ctx.shadowBlur = 8;
            ctx.strokeRect(x, y, buttonWidth, buttonHeight);
            
            // 绘制动态光点效果
            const time = Date.now() * 0.005;
            const pulseAlpha = 0.6 + Math.sin(time) * 0.2;
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 1;
            ctx.globalAlpha = pulseAlpha;
            ctx.strokeRect(x + 2, y + 2, buttonWidth - 4, buttonHeight - 4);
            ctx.globalAlpha = 1;
            
            // 绘制文字
            ctx.fillStyle = '#ffffff';
            ctx.font = 'bold 16px Arial';
            ctx.textAlign = 'center';
            ctx.shadowColor = '#00ffff';
            ctx.shadowBlur = 5;
            ctx.fillText('📚 知识库', x + buttonWidth/2, y + buttonHeight/2 + 5);
            ctx.shadowBlur = 0;
        }
        
        // 绘制网格背景
        function drawGrid() {
            ctx.strokeStyle = '#00ffff';
            ctx.lineWidth = 1;
            ctx.globalAlpha = 0.3;
            
            for (let x = 0; x <= canvas.width; x += 40) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            
            for (let y = 0; y <= canvas.height; y += 40) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }
            
            ctx.globalAlpha = 1;
        }
        
        // 颜色变暗函数
        function darkenColor(color, factor) {
            const r = parseInt(color.slice(1, 3), 16);
            const g = parseInt(color.slice(3, 5), 16);
            const b = parseInt(color.slice(5, 7), 16);
            
            const newR = Math.floor(r * (1 - factor));
            const newG = Math.floor(g * (1 - factor));
            const newB = Math.floor(b * (1 - factor));
            
            return `#${newR.toString(16).padStart(2, '0')}${newG.toString(16).padStart(2, '0')}${newB.toString(16).padStart(2, '0')}`;
        }
        
        // 动画循环
        function animate() {
            // 清空画布
            ctx.fillStyle = '#0a0a2a';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // 绘制网格
            drawGrid();
            
            // 绘制指挥官
            if (showCommander) {
                drawSciFiCircle(ctx, commanderX, commanderY, 25, '#00ffff');
                
                // 绘制指挥官标识
                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 14px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('CMD', commanderX, commanderY + 5);
            }
            
            // 绘制威胁
            if (showThreats) {
                threats.forEach(threat => {
                    drawThreat(ctx, threat.x, threat.y, threat.type, threat.color);
                });
            }
            
            // 绘制侧边栏
            if (showSidebar) {
                drawSciFiSidebar(ctx);
            }
            
            // 绘制知识库按钮
            if (showKnowledge) {
                drawKnowledgeButton(ctx);
            }
            
            // 绘制说明文字
            ctx.fillStyle = '#ffffff';
            ctx.font = '16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('科幻界面综合测试 - 增强可视化体验', canvas.width/2, 50);
            
            requestAnimationFrame(animate);
        }
        
        // 控制函数
        function toggleCommander() {
            showCommander = !showCommander;
            console.log('指挥官显示状态:', showCommander);
        }
        
        function toggleThreats() {
            showThreats = !showThreats;
            console.log('威胁显示状态:', showThreats);
        }
        
        function toggleSidebar() {
            showSidebar = !showSidebar;
            console.log('侧边栏显示状态:', showSidebar);
        }
        
        function toggleKnowledge() {
            showKnowledge = !showKnowledge;
            console.log('知识库按钮显示状态:', showKnowledge);
        }
        
        // 启动动画
        animate();
        
        console.log('🎮 科幻界面综合测试已启动');
        console.log('✨ 特性：科幻圆圈、浅亮色威胁、科幻侧边栏、动态知识库');
    </script>
</body>
</html> 