<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智能守护者联盟 - 游戏</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #0a0a2a;
            font-family: Arial, sans-serif;
            color: #ffffff;
            overflow: hidden;
        }
        
        #gameCanvas {
            display: block;
            margin: 0 auto;
            border: 2px solid #00ffff;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
        }
        
        .back-button {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #ff6b6b;
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            z-index: 1000;
        }
        
        .back-button:hover {
            background: #ff5252;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    
    <button class="back-button" onclick="goBack()">返回主菜单</button>

    <script type="module">
        // 导入游戏模块
        import Main from './js/main.js';

        // 初始化游戏
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // 设置全局变量
        window.GameGlobal = {
            canvas: canvas,
            ctx: ctx
        };

        // 启动游戏
        const game = new Main();

        function goBack() {
            window.location.href = 'main.html';
        }
        
        window.goBack = goBack;

        // 添加调试信息
        console.log('🎮 游戏已启动');
        console.log('📏 画布尺寸:', canvas.width, 'x', canvas.height);
        console.log('🎯 顶部栏高度: 80px');
        console.log('📊 分数显示位置: Y=30');
        console.log('📚 知识点显示位置: Y=50');
        console.log('🛡️ 安全等级显示位置: Y=30');
        console.log('❌ 错误数显示位置: X=280, Y=30');
        console.log('✅ 正确数显示位置: X=380, Y=30');
        console.log('📖 知识库按钮位置: Y=90');

        // 添加点击事件监听器来测试交互
        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            console.log(`🖱️ 点击位置: (${x}, ${y})`);
            
            // 检查是否点击了顶部区域
            if (y <= 80) {
                console.log('📍 点击了顶部区域');
            }
            
            // 检查是否点击了知识库按钮区域
            if (y >= 90 && y <= 130 && x >= 660 && x <= 780) {
                console.log('📚 点击了知识库按钮区域');
            }

            // 检查是否点击了底部Agent选择区域
            if (y >= 500 && y <= 600) {
                console.log('🎯 点击了底部Agent选择区域');
            }
        });

        // 定期检查游戏状态
        setInterval(() => {
            if (GameGlobal.databus) {
                console.log('📊 当前游戏状态:');
                console.log('  - 分数:', GameGlobal.databus.score);
                console.log('  - 知识点:', GameGlobal.databus.knowledgePoints);
                console.log('  - 安全等级:', GameGlobal.databus.securityLevel);
                console.log('  - 错误数:', GameGlobal.databus.getWrongAnswerCount());
                console.log('  - 正确数:', GameGlobal.databus.getCorrectAnswerCount());
                console.log('  - 知识库按钮显示:', GameGlobal.gameInfo.showKnowledgeButton);
                console.log('  - 知识库页面集成:', !!GameGlobal.knowledgePage);
            }
        }, 3000);
    </script>
</body>
</html> 